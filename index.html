<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detail2Go Arequipa - Reserva</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #020617;
            color: #f1f5f9;
        }

        .wheel-container {
            position: relative;
            width: 260px;
            height: 260px;
            margin: 20px auto;
        }

        #wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 4px solid #1e293b;
            position: relative;
            transition: transform 4s cubic-bezier(0.15, 0, 0.15, 1);
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .wheel-marker {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 20;
            width: 32px;
            height: 32px;
            background: white;
            clip-path: polygon(50% 100%, 0 0, 100% 0);
            filter: drop-shadow(0 4px 10px rgba(255, 255, 255, 0.3));
        }

        .prize-text {
            position: absolute;
            height: 100%;
            width: 100%;
            display: flex;
            justify-content: center;
            font-weight: 900;
            font-style: italic;
            text-transform: uppercase;
            font-size: 12px;
            color: white;
            padding-top: 25px;
            pointer-events: none;
        }

        .center-dot {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30px;
            height: 30px;
            background: #020617;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            z-index: 10;
        }

        .card-active {
            background: rgba(37, 99, 235, 0.05);
            border-color: #2563eb !important;
            box-shadow: 0 0 30px rgba(37, 99, 235, 0.2);
        }

        input[type="date"], input[type="time"] {
            color-scheme: dark;
        }

        .btn-primary {
            background: #2563eb;
            box-shadow: 0 10px 30px rgba(37, 99, 235, 0.4);
        }

        .btn-primary:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body class="pb-40">

    <!-- Navegaci√≥n -->
    <nav class="px-6 py-8 border-b border-white/5 backdrop-blur-xl sticky top-0 z-[100] bg-slate-950/80">
        <div class="max-w-xl mx-auto flex flex-col items-center">
            <div class="flex flex-col items-center -space-y-2 select-none">
                <div class="flex items-baseline italic uppercase">
                    <span class="text-4xl font-black tracking-tighter text-white">DETAIL</span>
                    <span class="text-4xl font-black tracking-tighter text-blue-500 ml-1">2GO</span>
                </div>
                <span class="text-[10px] font-black tracking-[0.5em] text-slate-500 uppercase self-end mr-1">Arequipa</span>
            </div>
        </div>
    </nav>

    <main class="max-w-xl mx-auto px-5 pt-10 space-y-16">

        <!-- 1. Veh√≠culo -->
        <section>
            <div class="text-center mb-6">
                <h3 class="text-[10px] font-black text-blue-400 uppercase tracking-[0.4em]">1. Elige tu veh√≠culo</h3>
            </div>
            <div class="grid grid-cols-2 gap-4">
                <div onclick="selectVehicle('Auto')" id="btn-auto" class="cursor-pointer p-8 rounded-[3rem] border-2 border-white/5 bg-slate-900 flex flex-col items-center gap-3 transition-all duration-300 text-slate-500">
                    <i class="fa-solid fa-car text-3xl"></i>
                    <span class="text-[10px] font-black uppercase tracking-widest">Auto Sed√°n</span>
                </div>
                <div onclick="selectVehicle('SUV')" id="btn-suv" class="cursor-pointer p-8 rounded-[3rem] border-2 border-white/5 bg-slate-900 flex flex-col items-center gap-3 transition-all duration-300 card-active text-white">
                    <i class="fa-solid fa-truck-monster text-3xl"></i>
                    <span class="text-[10px] font-black uppercase tracking-widest">SUV / Camioneta</span>
                </div>
            </div>
        </section>

        <!-- 2. Ruleta -->
        <section>
            <div class="text-center mb-6">
                <h3 class="text-[10px] font-black text-blue-400 uppercase tracking-[0.4em]">2. Tu Descuento Diario</h3>
            </div>
            <div class="bg-slate-900/50 rounded-[3.5rem] p-10 border border-white/5 flex flex-col items-center relative">
                <div class="wheel-marker"></div>
                <div class="wheel-container">
                    <div id="wheel">
                        <!-- Sectores generados por JS -->
                    </div>
                    <div class="center-dot"></div>
                </div>

                <div id="prize-display" class="hidden mb-4 text-center">
                    <p class="text-[10px] font-black text-slate-500 uppercase tracking-widest mb-1">Premio Ganado</p>
                    <div class="text-green-400 font-black text-2xl italic bg-green-500/10 px-6 py-2 rounded-2xl border border-green-500/20 animate-bounce">
                        DESCUENTO <span id="prize-value"></span> ‚ú®
                    </div>
                </div>

                <button id="spin-btn" onclick="spinWheel()" class="btn-primary flex items-center gap-3 px-10 py-5 rounded-[2rem] font-black text-[11px] uppercase text-white tracking-[0.2em] italic transition-all">
                    <i class="fa-solid fa-rotate"></i> Probar Suerte
                </button>
            </div>
        </section>

        <!-- 3. Planes -->
        <section class="space-y-6">
            <h3 class="text-[10px] font-black text-slate-500 uppercase tracking-[0.4em] mb-4">3. Elige tu Plan</h3>
            <div id="services-container" class="space-y-4">
                <!-- Servicios generados por JS -->
            </div>
        </section>

        <!-- 4. Extras -->
        <section>
            <h3 class="text-[10px] font-black text-slate-500 uppercase tracking-[0.4em] mb-6">4. Extras Premium</h3>
            <div id="extras-container" class="grid grid-cols-2 gap-4">
                <!-- Extras generados por JS -->
            </div>
        </section>

        <!-- 5. Datos -->
        <section class="mb-20">
            <h3 class="text-[10px] font-black text-blue-400 uppercase tracking-[0.3em] mb-6 text-center">5. Tus Datos de Contacto</h3>
            <div class="bg-slate-900/50 p-8 rounded-[3rem] border border-white/5 space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <input type="text" id="firstName" placeholder="Nombre" class="w-full bg-slate-950 border border-white/10 rounded-2xl p-5 text-sm outline-none focus:border-blue-500 font-bold transition-all">
                    <input type="text" id="lastName" placeholder="Apellido" class="w-full bg-slate-950 border border-white/10 rounded-2xl p-5 text-sm outline-none focus:border-blue-500 font-bold transition-all">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <input type="date" id="date" class="w-full bg-slate-950 border border-white/10 rounded-2xl p-5 text-sm outline-none focus:border-blue-500 font-bold">
                    <input type="time" id="time" class="w-full bg-slate-950 border border-white/10 rounded-2xl p-5 text-sm outline-none focus:border-blue-500 font-bold">
                </div>
            </div>
        </section>

    </main>

    <!-- Footer Flotante -->
    <div class="fixed bottom-0 left-0 w-full p-6 z-[150] bg-gradient-to-t from-slate-950 via-slate-950/90 to-transparent pt-12">
        <div class="max-w-xl mx-auto bg-slate-900/90 backdrop-blur-3xl border border-white/10 rounded-[3.2rem] p-6 flex items-center justify-between shadow-2xl">
            <div class="pl-4">
                <div class="text-[9px] font-black text-slate-500 uppercase tracking-widest mb-1">Total a Pagar</div>
                <div id="total-display" class="text-4xl font-black text-white italic tracking-tighter">S/ 0</div>
            </div>
            <button onclick="sendWhatsApp()" class="btn-primary px-12 py-6 rounded-[2.2rem] font-black text-xs uppercase italic text-white flex items-center gap-2">
                RESERVAR CUPO <i class="fa-solid fa-chevron-right text-[10px]"></i>
            </button>
        </div>
    </div>

    <script>
        // Configuraci√≥n y Estado
        let state = {
            vehicle: 'SUV',
            baseService: null,
            selectedExtras: [],
            prize: null,
            rotation: 0,
            isSpinning: false
        };

        const prizes = [
            { label: "S/ 5", value: 5, color: "#1e293b" },
            { label: "S/ 10", value: 10, color: "#2563eb" },
            { label: "S/ 6", value: 6, color: "#0f172a" },
            { label: "S/ 8", value: 8, color: "#3b82f6" },
            { label: "S/ 5", value: 5, color: "#1e293b" },
            { label: "S/ 7", value: 7, color: "#1d4ed8" },
        ];

        const services = [
            { id: 'ext', name: 'Solo Exterior', Auto: 40, SUV: 50, icon: 'fa-car' },
            { id: 'int', name: 'Solo Interior', Auto: 40, SUV: 50, icon: 'fa-table-cells-large' },
            { id: 'full', name: 'Combo Full (Int + Ext)', Auto: 70, SUV: 80, icon: 'fa-star' }
        ];

        const extras = [
            { id: 'cera', name: 'Cera Premium', price: 25, icon: 'fa-sun' },
            { id: 'motor', name: 'Lavado de Motor', price: 20, icon: 'fa-bolt' },
            { id: 'nutri', name: 'Nutrici√≥n Cuero', price: 15, icon: 'fa-droplet' },
            { id: 'ranura', name: 'Detallado Ranuras', price: 15, icon: 'fa-shield' }
        ];

        // Inicializar Ruleta
        function initWheel() {
            const wheel = document.getElementById('wheel');
            const angle = 360 / prizes.length;
            let gradient = "conic-gradient(";
            
            prizes.forEach((p, i) => {
                gradient += `${p.color} ${i * angle}deg ${(i + 1) * angle}deg${i === prizes.length - 1 ? "" : ", "}`;
                
                const textDiv = document.createElement('div');
                textDiv.className = 'prize-text';
                textDiv.style.transform = `rotate(${i * angle + (angle/2)}deg)`;
                textDiv.innerHTML = `<span>${p.label}</span>`;
                wheel.appendChild(textDiv);
            });
            
            gradient += ")";
            wheel.style.background = gradient;
        }

        function spinWheel() {
            if (state.isSpinning || state.prize) return;
            state.isSpinning = true;
            
            const spinBtn = document.getElementById('spin-btn');
            spinBtn.innerHTML = '<i class="fa-solid fa-spinner animate-spin"></i> Girando...';
            spinBtn.style.opacity = "0.5";

            const sectorAngle = 360 / prizes.length;
            const winningIndex = Math.floor(Math.random() * prizes.length);
            const extraSpins = 360 * 8; 
            const targetAngle = (winningIndex * sectorAngle);
            const finalRotation = state.rotation + extraSpins + (360 - (state.rotation % 360)) - targetAngle;
            
            state.rotation = finalRotation;
            document.getElementById('wheel').style.transform = `rotate(${finalRotation}deg)`;

            setTimeout(() => {
                state.isSpinning = false;
                state.prize = prizes[winningIndex];
                
                spinBtn.classList.add('hidden');
                document.getElementById('prize-display').classList.remove('hidden');
                document.getElementById('prize-value').innerText = state.prize.label;
                calculateTotal();
            }, 4000);
        }

        // UI Helpers
        function selectVehicle(v) {
            state.vehicle = v;
            document.getElementById('btn-auto').classList.toggle('card-active', v === 'Auto');
            document.getElementById('btn-auto').classList.toggle('text-white', v === 'Auto');
            document.getElementById('btn-suv').classList.toggle('card-active', v === 'SUV');
            document.getElementById('btn-suv').classList.toggle('text-white', v === 'SUV');
            renderServices();
            calculateTotal();
        }

        function renderServices() {
            const container = document.getElementById('services-container');
            container.innerHTML = services.map(s => `
                <div onclick="selectService('${s.id}')" class="p-6 rounded-[2.5rem] border-2 cursor-pointer transition-all ${state.baseService?.id === s.id ? 'bg-blue-600/5 border-blue-500' : 'bg-slate-900 border-transparent'}">
                    <div class="flex justify-between items-center">
                        <div class="flex items-center gap-4">
                            <div class="p-4 rounded-2xl ${state.baseService?.id === s.id ? 'bg-blue-600 text-white' : 'bg-slate-950 text-slate-500'}">
                                <i class="fa-solid ${s.icon}"></i>
                            </div>
                            <span class="font-black text-lg italic uppercase tracking-tighter ${state.baseService?.id === s.id ? 'text-white' : 'text-slate-300'}">${s.name}</span>
                        </div>
                        <span class="font-black italic text-xl text-white">S/ ${s[state.vehicle]}</span>
                    </div>
                </div>
            `).join('');
        }

        function selectService(id) {
            state.baseService = services.find(s => s.id === id);
            renderServices();
            calculateTotal();
        }

        function renderExtras() {
            const container = document.getElementById('extras-container');
            container.innerHTML = extras.map(e => {
                const isActive = state.selectedExtras.find(ex => ex.id === e.id);
                return `
                    <div onclick="toggleExtra('${e.id}')" class="p-5 rounded-[2.5rem] border-2 transition-all cursor-pointer h-32 flex flex-col justify-between ${isActive ? 'bg-blue-600 border-blue-400 text-white shadow-xl' : 'bg-slate-900 border-transparent text-slate-400'}">
                        <div class="flex justify-between items-start">
                            <div class="p-3 rounded-2xl bg-slate-950/50">
                                <i class="fa-solid ${e.icon}"></i>
                            </div>
                            <span class="text-[11px] font-black italic">+ S/ ${e.price}</span>
                        </div>
                        <div class="text-[10px] font-black uppercase tracking-widest">${e.name}</div>
                    </div>
                `;
            }).join('');
        }

        function toggleExtra(id) {
            const extra = extras.find(e => e.id === id);
            const index = state.selectedExtras.findIndex(e => e.id === id);
            if (index > -1) state.selectedExtras.splice(index, 1);
            else state.selectedExtras.push(extra);
            renderExtras();
            calculateTotal();
        }

        function calculateTotal() {
            let total = state.baseService ? state.baseService[state.vehicle] : 0;
            total += state.selectedExtras.reduce((acc, curr) => acc + curr.price, 0);
            if (state.prize) total = Math.max(0, total - state.prize.value);
            document.getElementById('total-display').innerText = `S/ ${total}`;
        }

        function sendWhatsApp() {
            const fName = document.getElementById('firstName').value;
            const lName = document.getElementById('lastName').value;
            const date = document.getElementById('date').value;
            const time = document.getElementById('time').value;

            if (!fName || !lName || !date || !time || !state.baseService) {
                alert("Por favor completa todos los campos y elige un plan.");
                return;
            }

            let message = `*NUEVA RESERVA DETAIL2GO*%0A`;
            message += `*Cliente:* ${fName} ${lName}%0A`;
            message += `*Fecha:* ${date}%0A`;
            message += `*Hora:* ${time}%0A`;
            message += `*--------------------------*%0A`;
            message += `*Veh√≠culo:* ${state.vehicle}%0A`;
            message += `*Servicio:* ${state.baseService.name}%0A`;
            if (state.selectedExtras.length > 0) message += `*Extras:* ${state.selectedExtras.map(e => e.name).join(', ')}%0A`;
            if (state.prize) message += `*üéÅ DESCUENTO:* S/ ${state.prize.value}%0A`;
            message += `*Total Final:* ${document.getElementById('total-display').innerText}`;

            window.open(`https://wa.me/51937631302?text=${message}`, '_blank');
        }

        // Iniciar
        window.onload = () => {
            initWheel();
            renderServices();
            renderExtras();
        };
    </script>
</body>
</html>
