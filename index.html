<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detail2Go - Arequipa</title>
    <!-- React y Babel -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    
    <style>
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: #020617; 
        }
        /* Clip-path para la ruleta */
        .wheel-slice {
            clip-path: polygon(50% 50%, 0 0, 100% 0);
        }
        input[type="date"], input[type="time"] {
            color-scheme: dark;
        }
        .instagram-gradient {
            background: radial-gradient(circle at 30% 107%, #fdf497 0%, #fdf497 5%, #fd5949 45%, #d6249f 60%, #285AEB 90%);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useRef, useEffect } = React;

        const Icon = ({ name, className }) => {
            const iconRef = useRef(null);
            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            }, [name]);
            return <i data-lucide={name} className={className}></i>;
        };

        const App = () => {
            const [vehicle, setVehicle] = useState('SUV');
            const [baseService, setBaseService] = useState(null);
            const [selectedExtras, setSelectedExtras] = useState([]);
            const [prize, setPrize] = useState(null);
            const [isSpinning, setIsSpinning] = useState(false);
            const [rotation, setRotation] = useState(0);
            
            const [clientData, setClientData] = useState({
                firstName: '',
                lastName: '',
                date: '',
                time: ''
            });

            const MI_WHATSAPP = "51937631302"; 
            const INSTAGRAM_URL = "https://instagram.com/detail2go"; // Cambiar por el real
            const TIKTOK_URL = "https://tiktok.com/@detail2go"; // Cambiar por el real

            const prizes = [
                { label: "S/ 5", value: 5, color: "#1e293b" },
                { label: "S/ 10", value: 10, color: "#2563eb" },
                { label: "S/ 6", value: 6, color: "#0f172a" },
                { label: "S/ 8", value: 8, color: "#3b82f6" },
                { label: "S/ 5", value: 5, color: "#1e293b" },
                { label: "S/ 7", value: 7, color: "#1d4ed8" },
            ];

            const services = [
                { id: 'ext', name: 'Solo Exterior', Auto: 40, SUV: 50, icon: 'car' },
                { id: 'int', name: 'Solo Interior', Auto: 40, SUV: 50, icon: 'layout-grid' },
                { id: 'full', name: 'Combo Full (Int + Ext)', Auto: 70, SUV: 80, icon: 'star' },
            ];

            const extras = [
                { id: 'cera', name: 'Cera Premium', price: 25, icon: 'sparkles' },
                { id: 'motor', name: 'Lavado de Motor', price: 20, icon: 'zap' },
                { id: 'nutri', name: 'Nutrici√≥n Interiores', price: 15, icon: 'droplet' },
                { id: 'ranura', name: 'Detallado de Ranuras', price: 15, icon: 'shield-check' },
            ];

            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setClientData(prev => ({ ...prev, [name]: value }));
            };

            const spinWheel = () => {
                if (isSpinning || prize) return;
                setIsSpinning(true);
                const extraSpins = 5 + Math.random() * 5;
                const randomSector = Math.floor(Math.random() * prizes.length);
                const sectorAngle = 360 / prizes.length;
                const totalRotation = rotation + (extraSpins * 360) + (randomSector * sectorAngle);
                setRotation(totalRotation);

                setTimeout(() => {
                    setIsSpinning(false);
                    const actualSector = Math.floor(((totalRotation % 360) / sectorAngle));
                    const winningIndex = (prizes.length - actualSector) % prizes.length;
                    setPrize(prizes[winningIndex]);
                }, 4000);
            };

            const toggleExtra = (extra) => {
                if (selectedExtras.find(e => e.id === extra.id)) {
                    setSelectedExtras(selectedExtras.filter(e => e.id !== extra.id));
                } else {
                    setSelectedExtras([...selectedExtras, extra]);
                }
            };

            const totalPrice = useMemo(() => {
                let total = baseService ? baseService[vehicle] : 0;
                total += selectedExtras.reduce((acc, curr) => acc + curr.price, 0);
                if (prize) total = Math.max(0, total - prize.value);
                return total;
            }, [baseService, vehicle, selectedExtras, prize]);

            const isFormValid = clientData.firstName && clientData.lastName && clientData.date && clientData.time && baseService;

            const sendWhatsApp = () => {
                if (!isFormValid) return;
                let message = `*NUEVA RESERVA DETAIL2GO*%0A`;
                message += `*Cliente:* ${clientData.firstName} ${clientData.lastName}%0A`;
                message += `*Fecha:* ${clientData.date}%0A`;
                message += `*Hora:* ${clientData.time}%0A`;
                message += `*--------------------------*%0A`;
                message += `*Veh√≠culo:* ${vehicle}%0A`;
                message += `*Servicio:* ${baseService.name}%0A`;
                if (selectedExtras.length > 0) message += `*Extras:* ${selectedExtras.map(e => e.name).join(', ')}%0A`;
                if (prize) message += `*üéÅ DESCUENTO:* S/ ${prize.value}%0A`;
                message += `*Total Final:* S/ ${totalPrice}`;
                window.open(`https://wa.me/${MI_WHATSAPP}?text=${message}`, '_blank');
            };

            return (
                <div className="min-h-screen bg-slate-950 text-slate-100 pb-44 font-sans tracking-tight">
                    <nav className="px-6 py-6 border-b border-white/5 bg-slate-950/50 backdrop-blur-xl sticky top-0 z-[100]">
                        <div className="max-w-xl mx-auto flex flex-col items-center">
                            <div className="flex flex-col items-center -space-y-1.5 select-none">
                                <div className="flex items-baseline italic uppercase">
                                    <span className="text-3xl font-[1000] tracking-tighter text-white">DETAIL</span>
                                    <span className="text-3xl font-[1000] tracking-tighter text-blue-500 ml-1">2GO</span>
                                </div>
                                <span className="text-[8px] font-black tracking-[0.5em] text-slate-500 uppercase self-end">Arequipa</span>
                            </div>
                        </div>
                    </nav>

                    <main className="max-w-xl mx-auto px-5 pt-8">
                        {/* 1. SELECTOR */}
                        <section className="mb-10">
                            <div className="flex items-center gap-2 mb-4 justify-center">
                                <h3 className="text-[10px] font-black text-blue-400 uppercase tracking-[0.3em]">1. Elige tu veh√≠culo</h3>
                            </div>
                            <div className="grid grid-cols-2 gap-4">
                                {['Auto', 'SUV'].map(type => (
                                    <button key={type} onClick={() => setVehicle(type)} className={`p-6 rounded-[2.5rem] border-2 transition-all duration-500 ${vehicle === type ? 'bg-blue-600 border-blue-400 shadow-[0_0_30px_rgba(37,99,235,0.3)]' : 'bg-slate-900 border-white/5 text-slate-500'}`}>
                                        <div className="flex flex-col items-center gap-2">
                                            <Icon name={type === 'Auto' ? 'car' : 'layout-grid'} className="w-10 h-10" />
                                            <span className="text-xs font-black uppercase">{type === 'Auto' ? 'Sed√°n' : 'SUV'}</span>
                                        </div>
                                    </button>
                                ))}
                            </div>
                        </section>

                        {/* 2. RULETA */}
                        <section className="mb-10">
                            <div className="flex items-center gap-2 mb-6 justify-center">
                                <h3 className="text-[10px] font-black text-blue-400 uppercase tracking-[0.3em]">2. Tu Descuento Diario</h3>
                            </div>
                            <div className="bg-slate-900/50 rounded-[3rem] p-8 border border-white/5 flex flex-col items-center relative overflow-hidden">
                                <div className="absolute top-6 left-1/2 -translate-x-1/2 z-20 w-6 h-6 bg-white shadow-xl" style={{clipPath: 'polygon(50% 100%, 0 0, 100% 0)'}}></div>
                                <div className="relative w-48 h-48 mb-6">
                                    <div style={{ transform: `rotate(${rotation}deg)`, transition: isSpinning ? 'transform 4s cubic-bezier(0.15, 0, 0.15, 1)' : 'none' }} className="w-full h-full rounded-full border-4 border-slate-800 relative overflow-hidden">
                                        {prizes.map((p, i) => (
                                            <div key={i} style={{ transform: `rotate(${i * 60}deg)`, backgroundColor: p.color }} className="absolute top-0 left-0 w-full h-full wheel-slice flex justify-center pt-4">
                                                <span className="text-[10px] font-black text-white mt-2">{p.label}</span>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                                {!prize ? (
                                    <button onClick={spinWheel} disabled={isSpinning} className="bg-blue-600 text-white px-8 py-4 rounded-2xl font-black text-xs uppercase shadow-xl active:scale-95 transition-all">
                                        {isSpinning ? 'Girando...' : 'Girar Ruleta'}
                                    </button>
                                ) : (
                                    <div className="text-green-400 font-black text-xl italic uppercase animate-pulse">¬°Ganaste S/ {prize.value}!</div>
                                )}
                            </div>
                        </section>

                        {/* 3. PLANES */}
                        <section className="mb-10">
                            <h3 className="text-[10px] font-black text-slate-500 uppercase tracking-[0.4em] mb-6">3. Elige tu Plan</h3>
                            <div className="space-y-4">
                                {services.map(s => (
                                    <div key={s.id} onClick={() => setBaseService(s)} className={`p-6 rounded-[2.5rem] border-2 cursor-pointer transition-all ${baseService?.id === s.id ? 'bg-blue-600/5 border-blue-500' : 'bg-slate-900 border-transparent'}`}>
                                        <div className="flex justify-between items-center">
                                            <div className="flex items-center gap-4">
                                                <div className={`p-4 rounded-2xl ${baseService?.id === s.id ? 'bg-blue-600' : 'bg-slate-950'}`}><Icon name={s.icon} className="w-5 h-5" /></div>
                                                <div><span className="font-bold text-lg">{s.name}</span></div>
                                            </div>
                                            <span className="font-black italic text-xl">S/ {s[vehicle]}</span>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </section>

                        {/* 4. EXTRAS */}
                        <section className="mb-10">
                            <h3 className="text-[10px] font-black text-slate-500 uppercase tracking-[0.4em] mb-6">4. Extras Premium</h3>
                            <div className="grid grid-cols-2 gap-4">
                                {extras.map(e => (
                                    <div key={e.id} onClick={() => toggleExtra(e)} className={`p-5 rounded-[2rem] border-2 cursor-pointer h-32 flex flex-col justify-between transition-all ${selectedExtras.find(ex => ex.id === e.id) ? 'bg-blue-600 border-blue-400 text-white shadow-lg' : 'bg-slate-900 border-transparent'}`}>
                                        <div className="flex justify-between items-start">
                                            <div className="p-2.5 rounded-xl bg-slate-950/50"><Icon name={e.icon} className="w-4 h-4" /></div>
                                            <span className="text-[11px] font-black italic">+ S/ {e.price}</span>
                                        </div>
                                        <span className="text-[10px] font-black uppercase leading-tight">{e.name}</span>
                                    </div>
                                ))}
                            </div>
                        </section>

                        {/* SECCI√ìN REDES SOCIALES */}
                        <section className="mb-10">
                            <h3 className="text-[10px] font-black text-slate-500 uppercase tracking-[0.4em] mb-6 text-center">Mira nuestro trabajo</h3>
                            <div className="grid grid-cols-2 gap-3">
                                <a href={INSTAGRAM_URL} target="_blank" className="instagram-gradient p-4 rounded-3xl flex items-center justify-center gap-3 active:scale-95 transition-all">
                                    <Icon name="instagram" className="w-5 h-5 text-white" />
                                    <span className="text-[10px] font-black uppercase text-white">Instagram</span>
                                </a>
                                <a href={TIKTOK_URL} target="_blank" className="bg-black p-4 rounded-3xl flex items-center justify-center gap-3 border border-white/10 active:scale-95 transition-all">
                                    <Icon name="music" className="w-5 h-5 text-white" />
                                    <span className="text-[10px] font-black uppercase text-white">TikTok</span>
                                </a>
                            </div>
                        </section>

                        {/* 5. DATOS */}
                        <section className="mb-24">
                            <h3 className="text-[10px] font-black text-blue-400 uppercase tracking-[0.3em] mb-6 text-center">5. Datos de Reserva</h3>
                            <div className="bg-slate-900/50 p-6 rounded-[2.5rem] border border-white/5 space-y-4">
                                <div className="grid grid-cols-2 gap-4">
                                    <input type="text" name="firstName" placeholder="Nombre" onChange={handleInputChange} className="w-full bg-slate-950 border border-white/10 rounded-2xl p-4 text-sm outline-none focus:border-blue-500"/>
                                    <input type="text" name="lastName" placeholder="Apellido" onChange={handleInputChange} className="w-full bg-slate-950 border border-white/10 rounded-2xl p-4 text-sm outline-none focus:border-blue-500"/>
                                </div>
                                <div className="grid grid-cols-2 gap-4">
                                    <input type="date" name="date" onChange={handleInputChange} className="w-full bg-slate-950 border border-white/10 rounded-2xl p-4 text-sm outline-none focus:border-blue-500"/>
                                    <input type="time" name="time" onChange={handleInputChange} className="w-full bg-slate-950 border border-white/10 rounded-2xl p-4 text-sm outline-none focus:border-blue-500"/>
                                </div>
                            </div>
                        </section>
                    </main>

                    {/* FOOTER */}
                    <div className="fixed bottom-0 left-0 w-full p-6 z-[150] bg-gradient-to-t from-slate-950 via-slate-950 to-transparent pt-12">
                        <div className="max-w-xl mx-auto bg-slate-900/90 backdrop-blur-2xl border border-white/10 rounded-[2.8rem] p-5 flex items-center justify-between shadow-2xl">
                            <div className="pl-4">
                                <div className="text-[9px] font-black text-slate-500 uppercase">Total Final</div>
                                <div className="text-3xl font-[1000] text-white italic tracking-tighter">S/ {totalPrice}</div>
                            </div>
                            <button disabled={!isFormValid} onClick={sendWhatsApp} className={`px-10 py-5 rounded-3xl font-black text-xs uppercase italic transition-all ${isFormValid ? 'bg-blue-600 text-white shadow-[0_0_20px_rgba(37,99,235,0.4)] active:scale-95' : 'bg-slate-800 text-slate-600'}`}>
                                Reservar <Icon name="chevron-right" className="inline w-4 h-4 ml-1" />
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
